pico-8 cartridge // http://www.pico-8.com
version 22
__lua__
-- DOOMFIRE
-- written by Adam Richardson

function _init()
	fw = 128
	fh = 32
	psize = 4
	pixels = {}
	for x=0,fw do
		for y=0,fh do
			pixels[idx_xy(x,y)]=0
		end
	end
	
	for x=0,fw-1 do
		pixels[idx_xy(x,fh-1)]=psize-1
	end
	
	colors = {
		0,
		8,
		9,
		10,
	}
end

function idx_xy(x,y)
	return y*fw+x
end

function spread(src)
	local p = pixels[src]
	if(p==0) then
		pixels[src-fw]=0
	else
		local r = band(rnd(3),3)
		local dst = src - r + 1
		pixels[dst-fw] = p-band(r,1) 
	end
end

function _update()
	for x=0,fw-1 do
		for y=1,fh-1 do
			spread(idx_xy(x,y))
		end
	end
end

function _draw()
	cls()
	local offset=128-fh
	for x=0,fw-1 do
		for y=0,fh-1 do
			pset(x,y+offset,colors[pixels[idx_xy(x,y)]])
		end
	end
	
	print("doom fire", 44, 40)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
