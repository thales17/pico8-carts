pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
-- CCCCCC
-- bY aDAM RICHARDSON

player={
	x=0,
	y=0,
	w=8,
	h=8,
	sidx=0,
	sdir=1,
	sw=1,
	sh=1,
	flipx=false,
	flipy=false,
	anim_t=0,
	anim_time=0.08}

level=0
gravity=2

function anim()
	if(player.anim_t+player.anim_time<t()) then
		player.anim_t=t()
		player.sidx+=player.sw*player.sdir
		if player.sidx>player.sw*2 then
			player.sidx=player.sw
			player.sdir*=-1
		end
		if player.sidx<0 then
			player.sidx=player.sw
			player.sdir*=-1
		end
	end
end

function physics()
	local x=flr(player.x/8)
	local y=flr((player.y+8)/8)
	x+=level*16
	if mget(x,y)==0 then
		player.y+=gravity
	end
end
-->8
function _init()
end

function _update60()
	if btn(1) or btn(0) then
		if btn(1) then
			player.x+=1
			player.x=min(player.x,120)
		else
			player.x-=1
			player.x=max(player.x,0)
		end
		anim()
	else
		player.sidx=1
	end
	
	physics()
end

function _draw()
	cls(3)
	map(level*16,0,0,0)
	spr(
		player.sidx,
		player.x,
		player.y,
		player.sw,
		player.sh,
		player.flipx,
		player.flipy)
--	print(mget(0,15))
end
__gfx__
00077000000770000007700004445440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000770000007700045454444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777777777777777777754444454000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70077007700770077007700745444545000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000770000007700054454444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777700007777000077770044444544000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700770007007000770070045445445000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07700000077007700000077004454440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000300000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000030000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000030000000000000000000000000000000300000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000003000300000000000000030303000000030000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000300000003000000000003030303000003000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000030000000000030000000303030303000300000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030303000000000000000303030303030303030000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
